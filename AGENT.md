# 開発ガイドライン

(a) 本システムは `environmentINFO.yml` を**毎回起動時に読み込みと検証**してから動作を開始すること。
(b) すべての人間が目にする出力（プルリクエスト本文、コメント、チャット応答など）は厳格に日本語で作成すること。

## 共通ルール
- 映像以外の内部状態に依存しない。Mod やサーバープラグインは任意の拡張扱いとし、標準環境で成立させる。
- 安全第一とし、非常停止操作で必ずすべての入力を即座に解放する。入力の長押し上限は 1.2 秒、連打上限は 5 Hz を超えないこと。
- 主要アクションでは簡潔な日本語で根拠を説明し、ログまたはチャットに残す。
- タスク管理は `new → running → (paused | canceled | done)` の遷移を厳守し、曖昧な指示は必ず問い合わせて確定する。
- キャプチャ枠はライブ運用時に既定で非表示とし、プレビュー表示は必要時のみ行う。
- ログは 1 サイクル 1 行の CSV を基本とし、重大エラー時にはスタックトレースと最後の観測を保存する。
- 主要モジュールは依存性の注入に対応させ、単体テストでモック画面や入力を扱えるようにする。
- パフォーマンス目安：観測→要約 80ms 以下、計画 2ms 以下、入力 8ms 以下。閾値を超えた場合は原因をログ出力する。

## テスト方針
- テストで UI を扱う際は `QT_QPA_PLATFORM=offscreen` を設定し、環境に依存しないようにする。
- ファイルを新規作成する際は対象ディレクトリに追加の `AGENT.md` が存在しないか確認し、その指示に従うこと。
